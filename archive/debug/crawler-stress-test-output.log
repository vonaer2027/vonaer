[dotenv@17.2.3] injecting env (10) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
ğŸš€ Combined Empty Leg Crawler (FlyXO + JetBay)
================================================
ğŸ“ Sources: FlyXO + JetBay (Jet-Bay)
ğŸ” Filter: Seoul (ICN/GMP) flights only
âœ¨ Features: Multi-source â†’ Deduplicate â†’ Upload

âœ… Supabase client initialized

â³ Starting parallel scraping...

ğŸ”µ Running FlyXO scraper...
ğŸŸ¢ Running JetBay scraper...
âŒ FlyXO scraper failed: Command failed: SKIP_UPLOAD=true SAVE_TO_FILE=true node flyxo-crawler-with-upload.js

âŒ Fatal error: Error: Could not find Chrome (ver. 142.0.7444.162). This can occur if either
 1. you did not perform an installation before running the script (e.g. `npx puppeteer browsers install chrome`) or
 2. your cache path is incorrectly configured (which is: /Users/kjyoo/.cache/puppeteer).
For (2), check out our guide on configuring puppeteer at https://pptr.dev/guides/configuration.
    at ChromeLauncher.resolveExecutablePath (/Users/kjyoo/emptyleg/node_modules/puppeteer-core/lib/cjs/puppeteer/node/BrowserLauncher.js:333:27)
    at ChromeLauncher.computeLaunchArguments (/Users/kjyoo/emptyleg/node_modules/puppeteer-core/lib/cjs/puppeteer/node/ChromeLauncher.js:93:24)
    at async ChromeLauncher.launch (/Users/kjyoo/emptyleg/node_modules/puppeteer-core/lib/cjs/puppeteer/node/BrowserLauncher.js:85:28)
    at async FlyXOCrawler.initialize (/Users/kjyoo/emptyleg/flyxo-crawler-with-upload.js:72:24)
    at async FlyXOCrawler.run (/Users/kjyoo/emptyleg/flyxo-crawler-with-upload.js:544:13)
    at async /Users/kjyoo/emptyleg/flyxo-crawler-with-upload.js:585:9
Script failed: Error: Could not find Chrome (ver. 142.0.7444.162). This can occur if either
 1. you did not perform an installation before running the script (e.g. `npx puppeteer browsers install chrome`) or
 2. your cache path is incorrectly configured (which is: /Users/kjyoo/.cache/puppeteer).
For (2), check out our guide on configuring puppeteer at https://pptr.dev/guides/configuration.
    at ChromeLauncher.resolveExecutablePath (/Users/kjyoo/emptyleg/node_modules/puppeteer-core/lib/cjs/puppeteer/node/BrowserLauncher.js:333:27)
    at ChromeLauncher.computeLaunchArguments (/Users/kjyoo/emptyleg/node_modules/puppeteer-core/lib/cjs/puppeteer/node/ChromeLauncher.js:93:24)
    at async ChromeLauncher.launch (/Users/kjyoo/emptyleg/node_modules/puppeteer-core/lib/cjs/puppeteer/node/BrowserLauncher.js:85:28)
    at async FlyXOCrawler.initialize (/Users/kjyoo/emptyleg/flyxo-crawler-with-upload.js:72:24)
    at async FlyXOCrawler.run (/Users/kjyoo/emptyleg/flyxo-crawler-with-upload.js:544:13)
    at async /Users/kjyoo/emptyleg/flyxo-crawler-with-upload.js:585:9

âœ… JetBay complete: 1 flights found

ğŸ”„ Combining flights and checking for duplicates...
ğŸ“Š Total flights before validation: 1
   FlyXO: 0
   JetBay: 1

ğŸ” Validating flights...

ğŸ“Š Validation Results:
   Valid flights: 1
   Invalid flights filtered: 0

ğŸ”„ Deduplicating valid flights...

ğŸ“Š Deduplication Results:
   Unique flights: 1
   Duplicates removed: 0
   Final breakdown:
      jetbay: 1 flights
ğŸ’¾ Saving combined data to JSON file...
âœ… Data saved to combined_flights_2025-11-24.json

ğŸš€ Starting unified Supabase upload...
ğŸ” Getting all currently active flights from database...
ğŸ“Š Found 96 active flights in database
ğŸ“Š Upload Summary:
   Total flights to upload: 1
   Active flights in DB: 96
   Flights to archive: 0
   Existing flights to update: 0
   New flights to insert: 1

ğŸ“¤ Uploading 1 new flights...
   Uploading batch 1/1...
   âœ… Successfully uploaded 1 flights

âœ… Supabase upload completed successfully!

ğŸ‰ Process completed successfully!
ğŸ“Š Final Statistics:
   Sources scraped: FlyXO + JetBay
   Total unique flights: 1
   FlyXO: 0
   JetBay: 1

ğŸ“‹ Complete list of routes found:
1. [jetbay] Seoul, South Korea â†’ Tokyo, Japan - Enquire for Price (Nov 25, 2025)

âœ¨ Combined crawling and upload session completed successfully!
[dotenv@17.2.3] injecting env (10) from .env -- tip: ğŸ”„ add secrets lifecycle management: https://dotenvx.com/ops
ğŸš€ Combined Empty Leg Crawler (FlyXO + JetBay)
================================================
ğŸ“ Sources: FlyXO + JetBay (Jet-Bay)
ğŸ” Filter: Seoul (ICN/GMP) flights only
âœ¨ Features: Multi-source â†’ Deduplicate â†’ Upload

âœ… Supabase client initialized

â³ Starting parallel scraping...

ğŸ”µ Running FlyXO scraper...
ğŸŸ¢ Running JetBay scraper...
âœ… FlyXO complete: 5 flights found

âœ… JetBay complete: 1 flights found

ğŸ”„ Combining flights and checking for duplicates...
ğŸ“Š Total flights before validation: 6
   FlyXO: 5
   JetBay: 1

ğŸ” Validating flights...
   âŒ Filtered out [flyxo]: Hanoi â†’ Seoul, South Korea - Unknown location (Hanoi)

ğŸ“Š Validation Results:
   Valid flights: 5
   Invalid flights filtered: 1
   Reasons for filtering:
      Unknown location (Hanoi): 1 flights

ğŸ”„ Deduplicating valid flights...

ğŸ“Š Deduplication Results:
   Unique flights: 5
   Duplicates removed: 0
   Final breakdown:
      flyxo: 4 flights
      jetbay: 1 flights
ğŸ’¾ Saving combined data to JSON file...
âœ… Data saved to combined_flights_2025-11-24.json

ğŸš€ Starting unified Supabase upload...
ğŸ” Getting all currently active flights from database...
ğŸ“Š Found 97 active flights in database
   ğŸ“¸ Using default image for flight flyxo_1763962571867_0 (Seoul, South Korea â†’ Shanghai, China)
   ğŸ“¸ Using default image for flight flyxo_1763962571867_1 (Seoul, South Korea â†’ Tokyo, Japan)
   ğŸ“¸ Using default image for flight flyxo_1763962571867_2 (Tokyo, Japan â†’ Seoul, South Korea)
   ğŸ“¸ Using default image for flight flyxo_1763962571867_4 (Singapore â†’ Seoul, South Korea)
ğŸ“Š Upload Summary:
   Total flights to upload: 5
   Active flights in DB: 97
   Flights to archive: 0
   Existing flights to update: 0
   New flights to insert: 5

ğŸ“¤ Uploading 5 new flights...
   Uploading batch 1/1...
   âœ… Successfully uploaded 5 flights

âœ… Supabase upload completed successfully!

ğŸ‰ Process completed successfully!
ğŸ“Š Final Statistics:
   Sources scraped: FlyXO + JetBay
   Total unique flights: 5
   FlyXO: 4
   JetBay: 1

ğŸ“‹ Complete list of routes found:
1. [flyxo] Seoul, South Korea â†’ Shanghai, China - 10080 USD (Wednesday, 26 NOV)
2. [flyxo] Seoul, South Korea â†’ Tokyo, Japan - 12250 USD (Friday, 28 NOV)
3. [flyxo] Tokyo, Japan â†’ Seoul, South Korea - 15170 USD (Tuesday, 25 NOV)
4. [flyxo] Singapore â†’ Seoul, South Korea - 61670 USD (Wednesday, 26 NOV)
5. [jetbay] Seoul, South Korea â†’ Tokyo, Japan - Enquire for Price (Nov 25, 2025)

âœ¨ Combined crawling and upload session completed successfully!
